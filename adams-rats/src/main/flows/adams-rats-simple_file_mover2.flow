# Project: adams
# Date: 2014-05-09 16:35:43
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	Simple demonstration that shows how to move files around\nusing the Reception And Transmission System (RATS).\n\nThe first RAT is monitoring the \"1_incoming\" directory and moves\nfiles to \"2_processing\".\nThe second RAT is monitoring the \"2_processing\" directory and \nmoves files to \"3_outgoing\".\n\nIn a real-world scenario, \"transmission\" wouldn\'t monitor \"2_processing\", \nbut the actual application processing the files. Instead, it would\nmonitor another directory altogether before moving it to \"3_outgoing\".
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.transformer.PassThrough
					-name
					nothing1
			-actor
				adams.flow.transformer.PassThrough
					-name
					nothing2
	-actor
		adams.flow.standalone.Rats
			-rat
				adams.flow.standalone.Rat
					-logging-level
					FINER
					-name
					incoming -> processing
					-receiver
						adams.flow.standalone.rats.InputPolling
							-input
								adams.flow.standalone.rats.InputWithCallableTransformer
									-input
										adams.flow.standalone.rats.FileLister
											-source
											${EXAMPLE_FLOWS}/1_incoming
											-move-files
											true
											-target
											${EXAMPLE_FLOWS}/2_processing
									-callable
									nothing1
							-wait-poll
							2000
					-actor
						adams.flow.transformer.PassThrough
					-transmitter
						adams.flow.standalone.rats.DummyOutput
			-rat
				adams.flow.standalone.Rat
					-logging-level
					FINER
					-name
					processing -> outgoing
					-receiver
						adams.flow.standalone.rats.InputPolling
							-input
								adams.flow.standalone.rats.FileLister
									-source
									${EXAMPLE_FLOWS}/2_processing
									-target
									${EXAMPLE_FLOWS}/2_processing
							-wait-poll
							2000
					-actor
						adams.flow.transformer.PassThrough
							-skip
							true
					-transmitter
						adams.flow.standalone.rats.OutputWithCallableTransformer
							-output
								adams.flow.standalone.rats.FileMover
									-wait-move
									500
									-target
									${EXAMPLE_FLOWS}/3_outgoing
							-callable
							nothing2
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.WhileLoop
			-name
			keep going
			-condition
				adams.flow.condition.bool.True
			-loop
				adams.flow.source.Start
			-loop
				adams.flow.control.Sleep
	-flow-execution-listener
		adams.flow.execution.NullListener

